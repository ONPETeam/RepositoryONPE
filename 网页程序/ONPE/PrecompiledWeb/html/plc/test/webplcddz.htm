<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="../../Scripts/EasyUI/themes/default/easyui.css" />
    <link rel="stylesheet" type="text/css" href="../../Scripts/EasyUI/themes/icon.css" />
    <link rel="stylesheet" type="text/css" href="../../Scripts/EasyUI/themes/color.css" />
    <link rel="stylesheet" type="text/css" href="../../Scripts/EasyUI/demo/demo.css" />
    <link rel="stylesheet" type="text/css" href="css/all.css" />
    <script type="text/javascript" src="../../Scripts/EasyUI/jquery.min.js"></script>
    <script type="text/javascript" src="../../Scripts/EasyUI/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="js/webplcddz.js"></script>
    <script src="js/validatebox.js" type="text/javascript"></script>  
</head>
<body>
        <table id="dg" title="plc点地址信息" style="width: 100%"></table>
        <div id="dlg" class="easyui-dialog" style="width: 700px; height: 350px; padding: 10px 20px"
            closed="true" buttons="#dlg-buttons" modal="true">
            
            <div class="ftitle">plc 点地址信息</div>
            <form id="fm" method="post" novalidate>
            <input id="isb" name="nsb" type="hidden" onclick="doSearch()" />
            <!--<input id="iAllAdress" name="AllAdress" class="easyui-textbox" type="hidden" />-->
            <div class="fitem">
                <table>
                    <tr>
                        <td align="right"><label>点地址:</label></td>
                        <td><input id="iAddress" name="Address" class="easyui-textbox"></td>
                        <td align="right"><label>plc名称:</label></td>
                        <td>
                            <input id="iplc" class="easyui-combobox" name="nplc" data-options="
				                    url: '../../ashx/plc/plcmanager.ashx?action=combox',
                                    method: 'get',
                                    required: false,
                                    panelWidth: 'auto',
                                    valueField: 'dIntPLCID',
                                    textField: 'dVchPLCName',
                                    groupField: 'dVchPLCXitongName'
			                    ">
                        </td>
                    </tr>
                    <tr>
                        <td align="right"><label>简称:</label></td>
                        <td><input id="iAdressName" name="AdressName" class="easyui-textbox"></td>
                        <td align="right"><label>描述:</label></td>
                        <td><input id="iDescription" name="Description" class="easyui-textbox"></td>
                    </tr>
                    <tr><td align="right"><label>功能分类:</label></td>
                        <td>
                            <input id="iGongType" name="GongType" class="easyui-combobox" data-options="
				                url:'../../ashx/plc/ahplcgnfl.ashx?type=cbox',
				                method:'get',
                                required: false,
				                valueField:'dIntGongNengID',
				                textField:'dVchGongNengName',
				                panelHeight:'auto'
			                 ">
                        </td>
                        <td align="right"><label>IO类型:</label></td>
                        <td>
                            <input id="iIOType" name="IOType" class="easyui-combobox" data-options="
				                url:'../../ashx/plc/ahplciofl.ashx?type=cbox',
				                method:'get',
                                required: false,
				                valueField:'dIntIOType',
				                textField:'dVchIOTypeName',
				                panelHeight:'auto'
			                    ">
                        </td>
                    </tr>
                    <tr>
                        <td align="right"><label>变量类型:</label></td>
                        <td>
                            <!--<select id="iDataType" name="DataType" class="easyui-combobox" panelheight="auto"
                            style="width: 150px">
                            <option value="BOOLEN">BOOLEN</option>
                            <option value="CHAR">CHAR</option>
                            <option value="BYTE">BYTE</option>
                            <option value="SHORT">SHORT</option>
                            <option value="LONG">LONG</option>
                            <option value="WORD">WORD</option>
                            <option value="DWORD">DWORD</option>
                            <option value="REAL">REAL</option>
                            <option value="INT">INT</option>
                        </select>-->
                            <input id="iDataType" name="DataType" />
                        </td>
                        <td align="right"><label>单位（度）:</label></td>
                        <td><input id="iDanwei" name="Danwei" class="easyui-textbox"></td>
                    </tr>
                    <!--<tr>-->
                    <!--<td align="right">
                        <label>
                            总故障点:</label>
                    </td>
                    <td>
                        <input type="radio" id="irgz" name="ZongGZ" value="1" />是
                        <input type="radio" id="irgz" name="ZongGZ" value="0" checked="true" />否
                    </td>-->
                    <!--<td align="right">
                        <label>
                            开关量状态:</label>
                    </td>
                    <td>
                        <select id="ikglzt" name="kglzt" class="easyui-combobox" panelheight="auto" style="width: 150px" required="true">
                   
                            <option value="1">故障点</option>
                            <option value="2">状态点</option>
                        </select>
                    </td>-->
                    <!--</tr>-->
                    <tr>
                        <td align="right"><label>标定最小值:</label></td>
                        <!--<td><input id="iMoniMin" name="MoniMin" value="0" class="easyui-validatebox" data-options="required:true,validType:'intOrFloat'"></td>-->
                        <td ><input class="easyui-numberbox" id="iMoniMin" name="MoniMin" value="0" style="width:150px"></td>
                        <td align="right"><label>标定最大值:</label></td>
                        <!--<td><input id="iMoniMax" name="MoniMax" value="0" class="easyui-validatebox" data-options="required:true,validType:'intOrFloat'"></td>-->
                        <td ><input class="easyui-numberbox" id="iMoniMax" name="MoniMax" value="0"  style="width:150px"></td>
                    </tr>
                    <tr>
                        <td align="right"><label>实际最小值:</label></td>
                        <!--<td><input id="iSjMin" name="SjMin" value="0" class="easyui-validatebox" data-options="required:true,validType:'intOrFloat'"></td>-->
                        <td ><input class="easyui-numberbox" id="iSjMin" name="SjMin" value="0"  style="width:150px"></td>
                        <td align="right"><label>实际最大值:</label></td>
                        <!--<td><input id="iSjMax" name="SjMax" value="0" class="easyui-validatebox" data-options="required:true,validType:'intOrFloat'"></td>-->
                        <td ><input class="easyui-numberbox" id="iSjMax" name="SjMax" value="0"   style="width:150px"></td>
                    </tr>
                    <tr>
                        <!--<td align="right">
                        <label> 倍数:</label>
                    </td>
                    <td>
                        <input id="iBeishu" name="Beishu" class="easyui-validatebox" validtype="" value="1">
                    </td>-->
                        <td align="right"><label>显示系统:</label></td>
                        <td>
                            <input id="iXitong" class="easyui-combobox" name="nXitong" data-options="
				            url: '../../ashx/plc/ahplcXitong.ashx?action=combobox',
				            method: 'get',
                            required: true,
                            panelHeight: 300,
				            valueField:'dIntNoteID',
				            textField:'dVchPointType',
				            groupField:'dVchRemark'
			            ">
                        </td>
                        <td align="right"><label>显示顺序</label></td>
                        <td><input id="iXS" name="nXS" style="width: 40px" class="easyui-validatebox" data-options="required:true,validType:'intOrFloat'"></td>
                            <!--<input id="Text1" name="nsjMin" value="0" style="width: 40px" class="easyui-validatebox" data-options="required:true,validType:'intOrFloat'"/>-->
                    </tr>
                    <tr><td align="right">用途分类:</td>
                        <td>
                            <select id="iyt" name="nyt" class="easyui-combobox" panelheight="auto" style="width: 155px">
                                <option value="0">无用途</option>
                                <option value="1">用途1</option>
                                <option value="2">用途2</option>
                                <option value="3">用途3</option>
                            </select>
                        </td>
                        <!--<td align="right"><label>采集地址：</label></td>
                <td><input id = "icjdz" name="ncjdz"  /></td>-->
                        <td align="right">计算变量:</td>
                        <td><input type="radio" id="ijsg1" name="njs" value="1" />是
                                <input type="radio" id="ijsg2" name="njs" value="0" checked="checked" />否
                        </td>
                    </tr>
                </table>

                
                <div class="ftitle">变量计算公式</div>
                <div><img src="../../img/Help.png"  style="width:12px;height:12px; vertical-align:middle"/>
                <a id="dd" href="javascript:void(0)">公式使用说明</a></div>
                <table>

                    <tr>
                        <td align="right"><label> 参数a:</label></td>
                        <td><input id="icsa" name="ncsa" class="easyui-combotree" style="width: 300px;"></td>
                    </tr>
                    <tr>
                        <td align="right"><label> 参数b:</label></td>
                        <td><input id="icsb" name="ncsb" class="easyui-textbox" style="width: 300px;"></td>
                    </tr>
                    <tr>
                        <td align="right"><label>参数c:</label></td>
                        <td>
                            <input id="icsc" name="ncsc" class="easyui-textbox" style="width: 300px;">
                        </td>
                    </tr>
                    <tr>
                        <td align="right"><label>公式:</label></td>
                        <td colspan="5"><input id="igs" name="ngs" class="easyui-textbox" style="width: 300px;"></td>
                         
                    </tr>
                </table>
            </div>
            </form>
            </div>
        <div id="dlg-buttons">
            <a href="#" class="easyui-linkbutton" iconcls="icon-ok" onclick="Save()">Save</a>
            <a href="#" class="easyui-linkbutton" iconcls="icon-cancel" onclick="javascript:$('#dlg').dialog('close')">Cancel</a>
        </div>
        <div id="dlg-kgl" class="easyui-dialog" title="开关量设定" style="width: 540px; height: 400px;
            padding: 10px 10px" closed="true" data-options="iconCls:'icon-save',resizable:true,modal:true"
            buttons="#dlgkg-buttons">
            <div class="ftitle">
            </div>
            <form id="fm-kgl" method="post" novalidate>
            <input id="ikid" name="knid" type="hidden" />
            <div class="fitem">
                <table>
                    <tr>
                        <td align="right"><label>点地址:</label></td>
                        <td><input id="ikAdress" name="knAdress"></td>
                        <td align="right"><label>功能描述:</label></td>
                        <td><input id="ikMiaosu" name="knDescription"></td>
                    </tr>
                    <tr>
                        <td align="right"><label>输出值:</label></td>
                        <td><input id="ikShuchu" name="knShuchu"></td>
                        <td align="right"><label>异常状态:</label></td>
                        <td>
                            <input type="radio" id="ikyc" name="nkyc" value="1" />是
                            <input type="radio" id="ikyc" name="nkyc" value="0" checked="true" />否
                        </td>
                    </tr>
                    <tr>
                        <td align="right"><label>输出含义:</label></td>
                        <td><input id="ikShuchuhy" class="easyui-textbox" name="knShuchuhy"></td>
                        <td align="right"><label>状态类型:</label></td>
                        <td>
                            <select id="ikztlx" name="knztlx" class="easyui-combobox" panelheight="auto" style="width: 150px">
                                <option value="0">未定义</option>
                                <option value="1">故障点</option>
                                <option value="2">状态点</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td align="right"><label>故障对策:</label></td>
                        <td>
                            <input id="ikgzdc" name="kngzdc" class="easyui-combogrid" style="width: 155px" data-options="
			                panelWidth: 500,
			                idField: 'dIntGzID',
			                textField: 'dVchGzName',
			                url: '../../ashx/plc/ahplcgzdc.ashx?action=grid',
			                method: 'get',
			                columns: [[
				                { field: 'dIntGzID', title: '故障id', width: 60, align: 'right',hidden:true },
                                { field: 'dVchGzName', title: '故障名称', width: 100, align: 'right'},
                                { field: 'dVchGzXx', title: '故障详细', width: 200, align: 'right',hidden:true },
                                { field: 'dVchGzYy', title: '故障原因', width: 200, align: 'right' },
                                { field: 'dVchGzCL', title: '故障处理对策', width: 200, align: 'right' }
               
			                ]],
			                fitColumns: true,
                            onSelect : function(){var grid = $('#ikgzdc').combogrid('grid'); var row = grid.datagrid('getSelected');  $('#ikGzYy').val(row.dVchGzYy); $('#ikclbf').val(row.dVchGzCL);}
		                ">
                        </td>
                        <td><a id="btn" href="#" class="easyui-linkbutton" data-options="iconCls:'icon-undo'"  onclick="setValue()">清空</a></td>
                    </tr>
                    <tr>
                        <td align="right">
                            <label>故障原因:</label>
                        </td>
                        <td colspan="3"><input id="ikGzYy" name="kngzyy" style="width: 400px" /></td>
                    </tr>
                    <tr>
                        <td align="right"><label>处理办法:</label></td>
                        <td colspan="3">
                            <input id="ikclbf" name="knclbf" style="width: 400px" />
                        </td>
                    </tr>
                </table>
            </div>
            <div class="fitem">
                <!-- <input id="ikgzdc" name="kngzdc" class="easyui-combobox"  
			    data-options="
				url:'../../ashx/plc/ahplcgzdc.ashx?action=cbox',
				method:'get',
				valueField:'dIntGzID',
				textField:'dVchGzName',
				panelHeight:'auto',
                onSelect : function(){$('#ikclbf').val('aaa');}
			">-->
            </div>
            <div class="fitem">
                <table id="dgkgl" title="plc开关量定义">
                </table>
            </div>
            </form>
        </div>
        <!--报警设定的操作弹出框 -->
        <div id="dlg-Bj" class="easyui-dialog" title="报警设定页面" style="width: 400px; height: 350px;
            padding: 10px" closed="true" modal="true" data-options="
				iconCls: 'icon-save',
				buttons: [{
					text:'Ok',
					iconCls:'icon-ok',
					handler:function(){
						savebj();
					}
				},{
					text:'Cancel',
					handler:function(){
						$('#dlg-Bj').dialog('close');
					}
				}]
			">
            <div class="ftitle">报警设定</div>
            <table>
                <tr>
                    <td align="right">
                        <label>设备编号：</label>
                    </td>
                    <td><label id="cbjsb"></label></td>
                </tr>
                <tr>
                    <td align="right"><label>采集地址：</label></td>
                    <td><label id="cbjdz"></label></td>
                </tr>
                <tr>
                    <td align="right"><label>地址类别：</label></td>
                    <td>
                        <select id="cbjlb" name="nbjlb" class="easyui-combobox" panelheight="auto" style="width: 155px">
                            <option value="0">---请选择---</option>
                            <option value="1">模拟量</option>
                            <option value="3">开关量</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td align="right"><label>模拟量报警范围:</label></td>
                    <td>
                        <input id="cbjMin" class="easyui-textbox" data-options="prompt:'最小值...',validType:'number'"  style="width: 70px;">-<input id="cbjMax" class="easyui-textbox" data-options="prompt:'最大值...',validType:'number'" style="width: 80px;">
                    </td>
                </tr>
                <tr>
                    <td align="right"><label>开关量报警值：</label></td>
                    <td>
                        <input id="cbkgl" class="easyui-textbox" data-options="prompt:'输入0或1...',validType:'number'" style="width: 70px;">
                    </td>
                </tr>
                <tr>
                    <td align="right"><label>推送人员</label></td>
                    <td>
                        <input id="cc" style="width: 155px;">
                    </td>
                </tr>
                <tr>
                    <td align="right">
                        <label>备注信息：</label>
                    </td>
                    <td>
                        <input id="cbjRemark" class="easyui-textbox" data-options="prompt:'备注信息...',multiline:true" style="width: 155px; height: 50px">
                    </td>
                </tr>
            </table>
        </div>
        <div id="dlgkg-buttons">
            <a href="#" class="easyui-linkbutton" iconcls="icon-ok" onclick="addkgldy()">Save</a>
            <a href="#" class="easyui-linkbutton" iconcls="icon-cancel" onclick="javascript:$('#dlg-kgl').dialog('close')">Cancel</a>
        </div>
        <div id="tb" style="height: auto">
            <a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-add',plain:true" onclick="Add()">添加</a>|
           <!-- <a href="#" class="easyui-splitbutton" data-options="menu:'#mm3',iconCls:'icon-add'">添加</a>| -->
            <a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-edit',plain:true"
                    onclick="Edit()">编辑</a>| <a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-cut',plain:true"
                        onclick="Del()">删除</a>|
            <!--<a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-remove',plain:true" onclick="bjdsd()">报警设定</a>|-->
            <a href="#" class="easyui-splitbutton" data-options="menu:'#mm2',iconCls:'icon-ok'">
                报警设定</a>|
            <label>PLC名称:</label>
            <input id="splc" />
            <label>系统名称：</label><input id="sxt" />
            <input id="sddz" class="easyui-searchbox" data-options="prompt:'请输入查找内容',searcher:doSearch" style="width: 150px" />|
            <!--    <input id="sddz" style="height:15px; margin:5px auto;"><bottom/> |
    	<a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-search',plain:true" onclick="doSearch()">查询</a><bottom/> |
-->
        </div>
        <div id="mm2" style="width: 100px;">
            <div data-options="iconCls:'icon-ok'" onclick="bjdsd()">设定</div>
            <div data-options="iconCls:'icon-cancel'" onclick="bjdqx()">取消</div>
        </div>
        <!--<div id="mm3" style="width: 100px;">
            <div data-options="iconCls:'icon-add'" onclick="Add()">
                添加点地址</div>
            <div data-options="iconCls:'icon-add'" onclick="bbb()">
                添加计算变量</div>
        </div>-->

</body>
</html>

